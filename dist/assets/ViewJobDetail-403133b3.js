import{r as c,aO as I,c as Y,j as s,aP as O,E as V,P,aQ as q,a2 as B,I as k,u as U,L as J,aR as W,H as G,b as H,a8 as K,aS as F,aT as Q,Z,aU as z,aV as X}from"./index-f542c721.js";import{J as D}from"./JobCard-25777740.js";import{h as ss,i as es,u as as}from"./candidateJobs-9f40d583.js";import{S as cs}from"./SubmitButton-265ed07f.js";import{S as ds}from"./successModal-121b1d48.js";import{S as ns}from"./ShareModal-cfad101f.js";const rs=({show:l,toggleModal:d,jobDetail:e,setJobDetails:r,toggleSuccessModal:t,coverLetterJson:v})=>{var g;const[f,o]=c.useState(!1);c.useState({}),c.useState(!1),c.useState(!1);const[A,_]=c.useState(!0),[S,b]=c.useState({}),[w,y]=c.useState(!0);c.useEffect(()=>{I().then(n=>{var m;b((m=n==null?void 0:n.data)==null?void 0:m.data)}).catch(n=>{console.log(n)}).finally(()=>{_(!1)})},[]);const{register:L,handleSubmit:C,formState:{errors:h}}=Y(),x=n=>{o(!0);const m={job:e==null?void 0:e.id,application_data:n==null?void 0:n.application_data,application_status:B.applied,candidate_cover_letter_json:v};ss(m).then(p=>{r({...e,already_applied:!0}),o(!1),d(),t()}).catch(p=>{var N,j;r({...e,already_applied:!1}),k((j=(N=p==null?void 0:p.response)==null?void 0:N.data)==null?void 0:j.message),o(!1),d()})},M=n=>{y(n)};return s.jsx(s.Fragment,{children:s.jsx(O,{showModal:l,title:"Apply",toggleModal:d,children:s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"openJobsList p-0",children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-7 col-12",children:s.jsxs("div",{className:"applicant-info-col",children:[s.jsx("div",{className:"applicant-thumb thumb-icon",children:s.jsx("img",{src:"/assets/images/yearExp-icon.svg",alt:"Year of Experience Icon"})}),s.jsxs("div",{className:"applicant-info",children:[s.jsx("h6",{children:e==null?void 0:e.title}),s.jsxs("p",{children:[(g=e==null?void 0:e.created_by)==null?void 0:g.company_name," ",s.jsxs("span",{children:["4.5 ",s.jsx("i",{className:"fas fa-star"})]})]})]})]})}),s.jsx("div",{className:"col-md-5 col-12",children:s.jsx("div",{className:"job-post-time",children:"Posted 5 mins ago"})})]}),s.jsxs("div",{className:"openjob-details border-bottom py-3",children:[s.jsx("p",{children:e==null?void 0:e.location}),s.jsx("p",{children:e==null?void 0:e.job_type}),s.jsx("p",{children:`${e==null?void 0:e.salary_currency}${e==null?void 0:e.salary_range_min}-${e==null?void 0:e.salary_currency}${e==null?void 0:e.salary_range_max}`}),s.jsx("p",{children:e==null?void 0:e.job_role})]})]}),s.jsx("form",{onSubmit:C(x),children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-12",children:[s.jsx("h6",{children:"Your Application"}),s.jsx("p",{children:"Your resume will be displayed on your profile. Write your information. Let them know why you are a good fit."}),s.jsxs("div",{className:"fieldset",children:[s.jsx("textarea",{placeholder:"Enter your comment here",className:"form-control message-field",...L("application_data",{required:"This field is required"})}),s.jsx("span",{className:"characters-sets",children:"3000 characters"}),(h==null?void 0:h.application_data)&&s.jsx(V,{msg:h.application_data.message})]}),s.jsxs("div",{className:"cover-section mt-5",children:[s.jsx("div",{className:"d-md-flex justify-content-between align-items-center create-wrapper",children:s.jsx("h2",{className:"section-heading-main mb-md-0 mb-3",children:"Cover Letter"})}),A&&s.jsx(P,{}),s.jsx("section",{className:"overview-cv"}),s.jsx(q,{coverLetterDetails:S,setLoader:_,isApplyModal:!0,getEditCoverletterValue:M})]})]}),s.jsx("div",{className:"col-12 mt-3",children:s.jsxs("div",{className:"popupBtn",children:[s.jsx("button",{type:"button",className:"btn-design border-btn",onClick:d,children:"Cancel"}),s.jsx(cs,{type:"submit",contentText:"Send Application",onClickCallBack:x,loader:f,disabled:f||!w})]})})]})})]})})})},ls=({showModal:l,toggleModal:d,prevRoute:e})=>{const r=U();return s.jsxs("div",{children:[s.jsx("div",{className:`modal ${l?"show":""}`,style:{display:l?"block":"none"},id:"skillPopup",tabIndex:"-1","aria-labelledby":"skillPopupLabel","aria-hidden":"true","data-ds-keyboard":"false",children:s.jsx("div",{className:"modal-dialog modal-dialog-centered",children:s.jsxs("div",{className:"modal-content",children:[s.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:d}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"subscriptionpopup",children:[s.jsxs("div",{className:"mb-4",children:["You have not completed your cover letter"," ",s.jsx("br",{}),s.jsxs("span",{children:["please update"," ",s.jsx(J,{className:"text-decoration-underline text-primary",to:"/job-seeker/cover-letter",state:{prevRoute:e},children:"Your cover later first"})," "]})," "]}),s.jsxs("div",{className:"d-flex gap-3",children:[s.jsx("button",{type:"button",className:"btn-design","data-bs-dismiss":"modal",onClick:()=>r("/job-seeker/cover-letter",{state:{prevRoute:e}}),children:"Update Cover Letter"}),s.jsx("button",{type:"button",className:"btn-design decline-btn","data-bs-dismiss":"modal",onClick:d,children:"Cancel"})]})]})})]})})}),s.jsx("div",{className:`modal-backdrop fade ${l?"show":""}`,style:{display:l?"block":"none"}})]})},ts=({rating:l,totalRating:d=W})=>s.jsx(s.Fragment,{children:[...Array(d)].map((e,r)=>{let t=r+.5;return s.jsx(s.Fragment,{children:l>=r+1?s.jsx("i",{className:"fas fa-star"},r):l>=t?s.jsx("i",{class:"fas fa-star-half-alt"}):s.jsx("i",{className:"fa-regular fa-star"},r)})})}),us=()=>{var N,j,E,T;const[l,d]=c.useState(!0),[e,r]=c.useState({}),{id:t}=G(),[v,f]=c.useState(!1),[o,A]=c.useState(!1),[_,S]=c.useState({}),[b,w]=c.useState(!1),[y,L]=c.useState(!1),C=U(),h=H(),x=K(a=>a.coverLetterAndResume);c.useEffect(()=>{es(t).then(a=>{r(a.data.data)}).catch(a=>{console.log(a),C("/job-seeker/jobs"),k(X)}).finally(()=>{d(!1)})},[t]),c.useEffect(()=>{F(x.coverLetterDetails)?I().then(a=>{var u,i;(i=(u=a==null?void 0:a.data)==null?void 0:u.data)!=null&&i.cover_letter_details&&(S(a.data.data.cover_letter_details),h(Q(a.data.data.cover_letter_details)))}).catch(a=>{console.log(a)}).finally(()=>{d(!1)}):S(x.coverLetterDetails)},[]);const M=()=>{F(_)?w(!0):g()},g=()=>{f(!v)},n=()=>{L(!y)},m=a=>{d(!0);const u={job:a,job_status:B.saved};as(u).then(i=>{r({...e,job_saved:!0}),d(!1),k(jobSavedMessage,successType)}).catch(i=>{var R,$;console.log(i),d(!1),k(($=(R=i==null?void 0:i.response)==null?void 0:R.data)==null?void 0:$.message)})},p=()=>{A(!o)};return s.jsxs(s.Fragment,{children:[s.jsx("main",{children:s.jsx("section",{className:"job-seeker-dashboard-sec py-70",children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:"row",children:[l&&s.jsx(P,{}),s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"shadow-box job-details-sec",children:s.jsxs("div",{className:"openJobsList",children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-7 col-12",children:s.jsxs("div",{className:"applicant-info-col",children:[s.jsx("div",{className:"applicant-thumb",children:s.jsx(J,{to:"/job-seeker/jobs",children:s.jsx("img",{src:"/assets/images/back-arrow-fill.svg"})})}),s.jsxs("div",{className:"applicant-info",children:[s.jsx("h4",{children:e==null?void 0:e.title}),s.jsxs("p",{children:[(N=e==null?void 0:e.created_by)==null?void 0:N.company_name,s.jsxs("span",{children:[(j=e==null?void 0:e.recruiter_company)==null?void 0:j.ratings,s.jsx(ts,{rating:(E=e==null?void 0:e.recruiter_company)==null?void 0:E.ratings})]})]})]})]})}),s.jsx("div",{className:"col-md-5 col-12",children:s.jsxs("div",{className:"job-apply-btn",children:[s.jsx("button",{className:"btn-design",onClick:M,disabled:e==null?void 0:e.already_applied,children:e!=null&&e.already_applied?"Already Applied":"Apply"}),s.jsxs("button",{type:"button",className:"btn-design border-btn","data-bs-toggle":"modal","data-bs-target":"#",onClick:()=>{m(e==null?void 0:e.id)},disabled:e==null?void 0:e.job_saved,children:[s.jsx("img",{src:e!=null&&e.job_saved?"/assets/images/marktag-icon.svg":"/assets/images/line-mark.svg"}),e!=null&&e.job_saved?"Already Saved":"Save Job"]})]})})]}),s.jsx("div",{className:"border-bottom job-detailbottom",children:s.jsxs("div",{className:"row align-items-end  py-3",children:[s.jsx("div",{className:"col-md-7 col-12",children:s.jsxs("div",{className:"openjob-details",children:[s.jsx("p",{children:e==null?void 0:e.location}),s.jsx("p",{children:e==null?void 0:e.job_type}),s.jsx("p",{children:`${e==null?void 0:e.salary_currency}${e==null?void 0:e.salary_range_min}-${e==null?void 0:e.salary_currency}${e==null?void 0:e.salary_range_max}`}),s.jsx("p",{children:e==null?void 0:e.job_role}),s.jsxs("p",{children:["Experience (",e==null?void 0:e.experience,")"]})]})}),s.jsx("div",{className:"col-md-5 col-12",children:s.jsxs("div",{className:"job-apply-btn",children:[s.jsx(J,{to:"/job-seeker/jobs",className:"btn-design decline-btn",children:"See more jobs"}),s.jsxs("div",{className:"dropdown list_edit_panel",children:[s.jsx("button",{className:"btn  dropdown-toggle",type:"button",id:"dropdownMenu2","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:s.jsxs("span",{children:[s.jsx("img",{src:"/assets/images/dots-icon.svg"})," "]})}),s.jsxs("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[s.jsxs("a",{href:"view_panel_detail.html",className:"dropdown-item",type:"button",children:[s.jsx("img",{src:"/assets/images/referral.svg"})," ","Referral Job"]}),s.jsxs("button",{className:"dropdown-item",type:"button",onClick:n,children:[s.jsx("img",{src:"/assets/images/sharing.svg"})," ","Sharing Job"]})]})]})]})})]})}),s.jsx("div",{className:"jobcompany-desc pt-3",children:s.jsxs("div",{className:"openJobFlex",children:[s.jsxs("div",{className:"openJobFlexCol border-bottom",children:[s.jsx("h6",{children:"Company Description"}),s.jsx("p",{children:e==null?void 0:e.about_company}),s.jsx("h6",{children:"Job Description"}),s.jsx("p",{children:e==null?void 0:e.role_details}),(e==null?void 0:e.key_responsibility)&&s.jsxs(s.Fragment,{children:[" ",s.jsx("h6",{children:"Key Responsibilities"}),s.jsx("p",{children:e==null?void 0:e.key_responsibility})]}),(e==null?void 0:e.additional_info)&&s.jsxs(s.Fragment,{children:[" ",s.jsx("h6",{children:"Additional Information"}),s.jsx("p",{children:e==null?void 0:e.additional_info})," "]})]}),s.jsxs("div",{className:"company-reviews py-3",children:[s.jsx("h6",{children:"Company Reviews"}),s.jsx("div",{className:"reiviews-col",children:s.jsx(Z,{})})]})]})})]})})}),s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"similar-jobs mt-5",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"m-2",children:s.jsx("h5",{children:"Similar jobs"})}),(T=e==null?void 0:e.similar_jobs)==null?void 0:T.map((a,u)=>s.jsx("div",{className:"col-md-6 col-12",children:s.jsx(D,{jobDetails:a,headerBadge:!1,featured:!1,handleSaveJob:m,showDetailJob:!0})},u))]})})})]})})})}),v?s.jsx(rs,{show:v,toggleModal:g,jobDetail:e,setJobDetails:r,toggleSuccessModal:p,coverLetterJson:x.coverLetterDetails}):o?s.jsx(ds,{showModal:o,toggleModal:p,children:z}):"",b&&s.jsx(ls,{showModal:b,toggleModal:()=>w(!1),prevRoute:`/job-seeker/job-detail/${t}`}),y&&s.jsx(ns,{showShareModal:y,toggleShareModal:n,text:"Share Job",jobID:t})]})};export{us as default};
