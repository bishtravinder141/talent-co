import{c as k,u as P,D as z,r as c,j as e,af as V,P as U,N as _,C as h,k as I,E as f,aM as L,p as Q,bY as T,M as X,a as B,a6 as J,Q as d}from"./index-f542c721.js";import{p as W}from"./password-icon-c9c96b4d.js";import{o as O}from"./yup-f45bf39b.js";import{c as K,a as u}from"./index.esm-822dde25.js";import{e as H,c as N,a as q}from"./staffApiData-ffb72625.js";const $="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAxIDc5LjE0NjI4OTk3NzcsIDIwMjMvMDYvMjUtMjM6NTc6MTQgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyNS4wIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDMEQzMDBERjU2REQxMUVFQkE3M0E5RUIxQjFGNjdGMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDMEQzMDBFMDU2REQxMUVFQkE3M0E5RUIxQjFGNjdGMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwRDMwMERENTZERDExRUVCQTczQTlFQjFCMUY2N0YyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwRDMwMERFNTZERDExRUVCQTczQTlFQjFCMUY2N0YyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+X21Y8QAAA+JJREFUeNrs3f9x0zAchnGF6wBmgoYJKBuUDdggZYKWCZpOAExAmQCYIGUCYIKGCcgGxSrKEYzTOhyuLeXz3OkfGs6K9PTrV/KPTm5ubgLQlUeGAIQBYUAYEAaEAQgDwoAwIAwIA8IAhAFhQBgQBoQBYQDCgDAgDAgDwgCEAWFAGBAGhAFhAMKAMCAMCAPCgDAAYUAYEAaEAWFAGIAwIAwIA8KAMMAtBzl3fjKZdPlYVbejuk3rdthTV77XbVm3r3Vb3ffhnP/k0EGhvwhRklndXtTt+IGPfVW3y7q9L3FgJznbvqXCREHepYoyJLHizNvEyXrMCxMmTtD5PZPYB3fJeZH6VYQwt53PtbXIctNo10mgowcYyniM03TMZj/mxYx5IcKcNCboR5q8oThrkea4BGFKOSVdN04Lz9KKZUhixVmkAL4+HcZ+rXIe8xL2YU4aspyNQJaQ+nDRyDkzq6ThK8xio9zH3+InHZfd6/+zSkvhvtisfvE4z4Xe4TJM1cgJpx1EebMlHPe1X3PeOFaV85jnfkpqrn4+3/P5xRappulnL3ro46d7+izDPCDTltywjXmHyXq3EVL/Z5bZ5JAww3G4w6Zcl8BZ9RRMlx03+QgzEqodJmoasPfCgDA7sQodbjvokIMIs0ff9U3HrPGZFoSJXHSoHq9Cf1e0CZMhz7dUmijJcd0+UuJuDvbs+65SFXmbluRxRfRNbiFMl6wirzglgTAgTKHE3eR5+H2LZrzrbww3o8swIyRKsWjIEQU6Cf1cAVdhMuaoRZZm5akIg5AqyCLs0QVLwvw789DP/TMyTIHE3eLTffzihNl9JfQhPPzz2oQZeNJnKazGSwXxskCXB+en+5ZXCPPrmaXzltwR80i8MLm8YyX0Ibgbb29C77o6vN4SUtc/n22RbEGW/akw26pKmzSXKdB+3agsFU3KEeZ7Y8Kr8PtWzGla9u4aUKueQ+3SKWk4li1ZY11Vvox0NZO1MLk/Wx2rwY+Nf7pMlWXMy97H9ZivCDOMMCH8+TD+2LkKmT+MX8IqKaeXD17mPtglVJgq5ZWxL3tjdrl9FYkKMywxD7zMoJ/zEpbVpWzcXY18QuahkPf2lrTTezFSaebhz1eXyTADZ5gmJ+HXzu7QmWaZ+vLXoyxe7DwuYTbFmYVhXh3/MZ2CWvdbCDNOYdbEVdTTVHH6qjrL1L6Fwv84RdbCQOgFYUAYEAYgDAgDwoAwIAxAGBAGhAFhQBgQBiAMCAPCgDAgDAgDEAaEAWFAGBAGhAEIA8KAMCAMCAMQBoQBYUAYEAaEAQgDwoAwIAwIA8IAhAFhMBQ/BRgAGFolOKrLbrkAAAAASUVORK5CYII=",ee="/assets/designation-45f05ab9.svg";const se=K().shape({first_name:u().required("First name is required"),last_name:u().required("Last name is required"),designation:u().required("Designation is required"),skill_level:u().required("Role is required"),password:u().required("Password is required").min(6,"Password must be at least 6 digits long.").matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^A-Za-z0-9]).{6,}$/g,"Password must contain at least one uppercase letter, one lowercase letter, one digit, and one special character"),phone_number:u().matches(/^[0-9]+$/,"Mobile number must contain only digits with country code eg: 919898989898").min(12,X).max(15,B).required("Mobile number is required"),email:u().matches(J,"Invalid email address").required("Email is required")});function ce(){var v,w;const{register:E,setValue:g,handleSubmit:S,control:p,formState:{errors:l}}=k({resolver:O(se)}),A=P(),{pathname:ae,state:s}=z(),[R,m]=c.useState(!1),[ie,D]=c.useState(""),[j,Y]=c.useState(null),[M,C]=c.useState(null);c.useState(""),c.useState(!1);const[x,G]=c.useState(!1);c.useEffect(()=>{var a,n,i,r;s&&s.staffMember&&(D(s.staffMember.id),["first_name","last_name","email","password"].forEach(o=>{g(o,s.staffMember[o])}),((a=s==null?void 0:s.staffMember)==null?void 0:a.phone_number[0])==="+"&&g("phone_number",(i=(n=s==null?void 0:s.staffMember)==null?void 0:n.phone_number)==null?void 0:i.slice(1)),g("designation",s.staffMember.designation),g("skill_level",(r=s.staffMember.groups[0])==null?void 0:r.name),g("profile_picture",s.staffMember.profile_picture))},[s]);const Z=()=>{A("/job-recruiter/staff")},y=a=>{const n=a.target.files[0];if(!n.name.match(/\.(jpg|jpeg|png)$/))d.error("Please upload vaild format image(jpg,jpeg,png)");else if(Y(n),n){const i=new FileReader;i.onload=r=>{C(r.target.result)},i.readAsDataURL(n)}},F=a=>{const n={...a,phone_number:`+${a.phone_number}`};m(!0),s&&s.staffMember?H(s.staffMember.id,n).then(i=>{var r,t;if(j){const o=new FormData;o.append("profile_picture",j),N((t=(r=i.data)==null?void 0:r.data)==null?void 0:t.id,o).then(b=>{A("/job-recruiter/staff"),m(!1)}).catch(b=>{m(!1),console.log(b)})}else d.success("Staff updated successfully"),A("/job-recruiter/staff")}).catch(i=>{var r,t;(t=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&t.message?d.error(i.response.data.message):d.error("Something went wrong"),console.error("Error updating data:",i)}).finally(()=>{m(!1)}):q(n).then(i=>{var r,t;if(j){const o=new FormData;o.append("profile_picture",j),N((t=(r=i.data)==null?void 0:r.data)==null?void 0:t.id,o).then(b=>{d.success("Staff Created Successfully"),A("/job-recruiter/staff"),m(!1)}).catch(b=>{m(!1),console.log(b)})}else d.success("Staff Created Successfully"),A("/job-recruiter/staff")}).catch(i=>{var r,t;m(!1),(t=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&t.message?d.error(i.response.data.message):d.error("Something went wrong"),console.error("Error saving data:",i)})};return e.jsx(e.Fragment,{children:e.jsxs(V,{header:s!=null&&s.staffMember?"Edit Staff":"Add Staff",subTitle:"Vivamus facilisis arcu quis sapien venenatis, a feugiat urna tristique. Sed gravida non mauris at",showSearchBar:!1,showSidebar:!1,children:[R&&e.jsx(U,{className:"loader_stance"}),e.jsx("section",{className:"dashboard-main-panel",children:e.jsx("div",{className:"addStaffForm",children:e.jsxs("form",{onSubmit:S(F),enctype:"multipart/form-data",children:[e.jsxs("div",{className:"fieldset-heading",children:[e.jsx("h6",{children:"Staff Details"}),e.jsx("p",{children:"Provide your staff details"})]}),e.jsx("div",{className:"form-field shadow-box",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 pb-3 mb-4",children:e.jsx("div",{className:"fieldset",children:e.jsxs("div",{className:"expert_profile_image",children:[e.jsxs("div",{className:"profile_avtar",children:[e.jsx("div",{className:"upload_file_btn",children:e.jsx("input",{type:"file",name:"logo",accept:"image/*",onChange:a=>y(a)})}),e.jsx("img",{id:"companyLogo",src:M||((v=s==null?void 0:s.staffMember)!=null&&v.profile_picture?`${_}${s.staffMember.profile_picture}`:$),alt:"Staff Image"})]}),e.jsx("p",{children:"Add Staff Image"})]})})}),e.jsx("div",{className:"col-md-6 col-12",children:e.jsxs("div",{className:"fieldset",children:[e.jsx(h,{name:"first_name",control:p,defaultValue:"",render:({field:a})=>e.jsx("input",{...a,className:"form-control input-icon phone-number",placeholder:"First Name"})}),e.jsx("span",{className:"input-field-icon",children:e.jsx("img",{src:I,alt:"user icon"})}),l.first_name&&e.jsx(f,{msg:l.first_name.message})]})}),e.jsx("div",{className:"col-md-6 col-12",children:e.jsxs("div",{className:"fieldset",children:[e.jsx(h,{name:"last_name",control:p,defaultValue:"",render:({field:a})=>e.jsx("input",{...a,className:"form-control input-icon phone-number",placeholder:"Last Name"})}),e.jsx("span",{className:"input-field-icon",children:e.jsx("img",{src:I,alt:"user icon"})}),l.last_name&&e.jsx(f,{msg:l.last_name.message})]})}),e.jsx("div",{className:"col-md-6 col-12",children:e.jsxs("div",{className:"fieldset",children:[e.jsx(h,{name:"email",control:p,defaultValue:"",render:({field:a})=>e.jsx("input",{...a,className:"form-control input-icon phone-number",placeholder:"Email"})}),e.jsx("span",{className:"input-field-icon",children:e.jsx("img",{src:L,alt:"user icon"})}),l.email&&e.jsx(f,{msg:l.email.message})]})}),e.jsx("div",{className:"col-md-6 col-12",children:e.jsxs("div",{className:"fieldset",children:[e.jsx(h,{name:"phone_number",control:p,defaultValue:"",render:({field:a})=>e.jsx("input",{...a,onChange:n=>{const i=n.target.value.replace(/[^0-9]/g,"");a.onChange(i)},className:"form-control input-icon phone-number",placeholder:"Phone number eg: 919898989898","aria-invalid":"true","aria-errormessage":"error-message-phone"})}),e.jsx("span",{className:"input-field-icon",children:e.jsx("img",{src:Q,alt:"phone icon"})}),l.phone_number&&e.jsx(f,{id:"error-message-phone",msg:l.phone_number.message})]})}),e.jsx("div",{className:"col-md-6 col-12",children:e.jsxs("div",{className:"fieldset",children:[e.jsx(h,{name:"designation",control:p,defaultValue:"",render:({field:a})=>e.jsx("input",{...a,className:"form-control input-icon phone-number",placeholder:"Designation"})}),e.jsx("span",{className:"input-field-icon",children:e.jsx("img",{src:ee,alt:"designation icon"})}),l.designation&&e.jsx(f,{msg:l.designation.message})]})}),!(s!=null&&s.staffMember)&&e.jsx("div",{className:"col-md-6 col-12",children:e.jsxs("div",{className:"fieldset",children:[e.jsx(h,{name:"password",control:p,defaultValue:"",render:({field:a})=>e.jsx("div",{children:e.jsx("input",{...a,placeholder:"Password",className:"password form-control input-icon",type:x?"text":"password","aria-invalid":"true","aria-errormessage":"error-message-pasword"})})}),e.jsx("i",{className:`far icon-position ${x?"fa-eye fa-eye-slash":"fa-eye-slash"}`,style:{cursor:"pointer"},onClick:()=>G(!x)}),e.jsx("span",{className:"input-field-icon",children:e.jsx("img",{src:W})}),l.password&&e.jsx(f,{id:"error-message-pasword",msg:l.password.message})]})}),e.jsxs("div",{className:"col-md-12 col-12 mt-2",children:[e.jsx("label",{children:"Role"}),e.jsxs("div",{className:"fieldset",children:[e.jsx("div",{className:"radio-btns mb-2",children:(w=T)==null?void 0:w.map((a,n)=>e.jsxs("div",{className:"radio-btn-items",children:[e.jsx("input",{...E("skill_level"),type:"radio",name:"skill_level",value:a.key}),e.jsx("span",{children:a.value})]},n))}),l.skill_level&&e.jsx(f,{id:"error-message-pasword",msg:l.skill_level.message})]})]}),e.jsx("div",{className:"col-12 text-center mt-5",children:e.jsxs("div",{className:"fieldset d-flex justify-content-center",children:[e.jsx("button",{type:"button",onClick:Z,className:"cancel-btnn",children:"Cancel"}),e.jsx("button",{type:"submit",className:"save-btnn",children:s?"Update":"Save"})]})})]})})]})})})]})})}export{ce as default};
