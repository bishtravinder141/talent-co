import{j as s,L as N,m as S,u as p,n as I,o as L,q as k,Q as u,e as _,R as r,r as b,A as y,G as R,F as w,U as A}from"./index-f542c721.js";import{S as C}from"./SubmitButton-265ed07f.js";import{S as E}from"./recaptcha-wrapper-0c87ddc3.js";const O=({children:d})=>s.jsx("div",{className:"login-signup-module",children:s.jsxs("div",{className:"row align-items-center",children:[s.jsx("div",{className:"col-md-6 col-12",children:s.jsxs("div",{className:"join-module custom_login",children:[s.jsx("div",{className:"logo",children:s.jsx(N,{to:"/",children:s.jsx("img",{src:S})})}),d]})}),s.jsx("div",{className:"col-md-6 col-12",children:s.jsxs("div",{className:"join-tabgline",children:[s.jsx("h3",{className:"text-center",children:"Join the worldâ€™s Climate, ESG & Sustainability community."}),s.jsx("p",{className:"text-center",children:"Find an employer of choice and a job you love"})]})})]})}),T="/assets/microsoft-icon-8ef70160.svg",G="/assets/apple-icon-7c47458c.svg",F="/assets/google-icon-f1c8c3fe.svg",P=({afterAPISuccess:d})=>{const m=p(),n=async()=>{try{let c=await L.loginPopup(k);const i="/accounts/microsoft-login/";g(c==null?void 0:c.accessToken,i)}catch(c){console.error("Login error",c),u.error(c)}},j=I({onSuccess:async c=>{try{const i="/accounts/google-login/";g(c.access_token,i)}catch(i){console.error("Google error:",i),u.error(i)}}}),g=(c,i)=>{_.post(i,{token:c}).then(t=>{var l,x,o;const a=(x=(l=t.data)==null?void 0:l.data)==null?void 0:x.groups,e=(o=t==null?void 0:t.data)==null?void 0:o.data;localStorage.setItem("token",e==null?void 0:e.access),localStorage.setItem("refresh_token",e==null?void 0:e.refresh),localStorage.setItem("user_id",e==null?void 0:e.id),localStorage.setItem("selectedRole",a),localStorage.setItem("first_name",e!=null&&e.first_name?e==null?void 0:e.first_name:e!=null&&e.givenName?e==null?void 0:e.givenName:e==null?void 0:e.given_name),localStorage.setItem("last_name",e!=null&&e.last_name?e==null?void 0:e.last_name:e!=null&&e.surname?e==null?void 0:e.surname:e==null?void 0:e.family_name),localStorage.setItem("phone_number",e==null?void 0:e.phone_number),localStorage.setItem("email",e!=null&&e.email?e==null?void 0:e.email:e==null?void 0:e.mail),a?a===r.jobseeker?m("/job-seeker/dashboard"):m("/job-recruiter/dashboard"):d()}).catch(t=>{var e,l;const a=(l=(e=t==null?void 0:t.response)==null?void 0:e.data)!=null&&l.message?t.response.data.message:"Something went wrong! please try again";u.error(a)})};return s.jsxs("div",{className:"sign-options",children:[s.jsxs(N,{to:"/",className:"border-btn",children:[s.jsx("img",{src:G})," Login with Apple"]}),s.jsxs("button",{className:"social-login-btn",onClick:j,children:[s.jsx("img",{src:F})," Login with Google"]}),s.jsxs("button",{className:"social-login-btn",onClick:n,children:[s.jsx("img",{src:T})," Login with Microsoft"]})]})},v="/assets/checked-icon-3ae4d291.svg",J="/assets/recruitingIcon-8e2d5789.svg",q="/assets/jobsIcon-364e7d5f.svg",W=({afterSelectUserType:d,userID:m})=>{const[n,j]=b.useState(r.jobseeker),[g,c]=b.useState(!1),[i,t]=b.useState([]);b.useEffect(()=>{y.get(R).then(e=>{t(e.data.data)}).catch(e=>{console.log(e)})},[]);const a=()=>{const e=localStorage.getItem("user_id");c(!0);const l=i.find(o=>o.name===n),x={user_id:m||e,group_id:l==null?void 0:l.id};y.patch(A,x).then(o=>{var h;c(!1),d(n),(h=o==null?void 0:o.data)!=null&&h.message&&u.success(o.data.message),localStorage.setItem("selectedRole",n)}).catch(o=>{var h,f;c(!1),((h=o==null?void 0:o.response)==null?void 0:h.status)===400&&(localStorage.setItem("selectedRole",n),u.error((f=o.response.data)==null?void 0:f.message))})};return s.jsxs(s.Fragment,{children:[s.jsx(E,{}),s.jsx("section",{className:"login-process-sec py-100",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"login-process-wrap",children:[s.jsx("h3",{children:"What are you interested in?"}),s.jsx("p",{children:"Help us customize your experience"}),s.jsxs("div",{className:"select-types d-flex justify-content-center pt-2 pb-4",children:[s.jsxs("div",{className:"types-col",children:[s.jsxs("div",{className:"inputype-col",children:[s.jsx("input",{type:"radio",name:"login-type",className:"radio-btn",checked:n===r.recruiter,onChange:()=>j(r.recruiter)}),s.jsx("span",{children:s.jsx("img",{src:v,alt:"Checked"})})]}),s.jsx("img",{src:J,alt:"Recruiting"}),s.jsx("h6",{children:"Recruiting"}),s.jsx("p",{children:"Hire high-quality candidates"})]}),s.jsxs("div",{className:"types-col",children:[s.jsxs("div",{className:"inputype-col",children:[s.jsx("input",{type:"radio",name:"login-type",className:"radio-btn",checked:n===r.jobseeker,onChange:()=>j(r.jobseeker)}),s.jsx("span",{children:s.jsx("img",{src:v,alt:"Checked"})})]}),s.jsx("img",{src:q,alt:"Jobs"}),s.jsx("h6",{children:"Jobs"}),s.jsx("p",{children:"Find Your Dream Job"})]})]}),s.jsx(C,{loader:g,type:"button",contentText:"Continue",disabled:g,onClickCallBack:a})]})})})})}),s.jsx(w,{})]})};export{O as A,W as L,P as S};
