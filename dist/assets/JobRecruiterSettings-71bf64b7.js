import{j as e,r as d,c as C,P as _,E as F,bz as A,bA as $,I as P,bB as S,bC as L,bD as B,af as D,bE as f}from"./index-f542c721.js";import{P as R,T as v,N as U}from"./NotificationTab-be0b33a6.js";import{S as q}from"./successModal-121b1d48.js";const z=({plan:s,handleUpgrade:n})=>e.jsx("div",{className:"col-md-4 col-12",children:e.jsxs("div",{className:`pricing-col ${s.plan_selected?"selected-plans":""}`,children:[e.jsx("h3",{className:"text-capitalize",children:s.name}),e.jsx("p",{children:s.plan_description}),e.jsx("div",{className:"pricing-price",children:s.plan_name==="free"?"Free":e.jsxs(e.Fragment,{children:[e.jsx("sup",{children:"$"})," ",s==null?void 0:s.plan_price]})}),e.jsx("div",{className:"description text-capitalize",children:e.jsx("p",{children:s==null?void 0:s.description})}),e.jsx("button",{type:"button",className:`btn-design ${s.plan_selected?"border-btn":""}`,"data-bs-toggle":"modal","data-bs-target":"#experiencePopup",disabled:s==null?void 0:s.plan_selected,onClick:()=>{n(s)},children:s.plan_selected?"Selected":"Upgrade"})]})}),E=({showModal:s,toggleModal:n,title:x,planInfo:i,handleUpgradeSubscription:j,loader:p})=>{var u;d.useState(null);const{register:m,handleSubmit:g,formState:{errors:a}}=C(),h=l=>{const r={...l,plan_id:(l==null?void 0:l.payment_method)==="stripe"?i==null?void 0:i.stripe_product_id:i==null?void 0:i.paypal_product_id};j(r)};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:`modal ${s?"show":""}`,style:{display:s?"block":"none"},id:"skillPopup",tabIndex:"-1","aria-labelledby":"skillPopupLabel","aria-hidden":"true","data-ds-keyboard":"false",children:[p&&e.jsx(_,{}),e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:e.jsx("form",{onSubmit:g(h),children:e.jsxs("div",{className:"modal-content",children:[" ",e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",id:"skillPopupLabel",children:x}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:n})]}),e.jsxs("div",{className:"row pt-4 added-payment-card",children:[e.jsxs("div",{className:"col-lg-4 col-12",children:[e.jsx("h5",{children:"Payment Method"}),e.jsx("div",{className:"select-types",children:R.map(({title:l,cardNumber:r,imageName:N,value:b})=>e.jsxs("div",{className:"types-col",children:[e.jsxs("div",{className:"inputype-col",children:[e.jsx("input",{type:"radio",name:"payment_method",className:"radio-btn",id:"card-selected",defaultChecked:"",value:b,...m("payment_method",{required:"Payment method is not selected"})}),e.jsx("span",{children:e.jsx("img",{src:"/assets/images/checked-icon.svg"})})]}),e.jsxs("div",{className:"payement-card",children:[e.jsx("span",{children:l}),e.jsxs("div",{className:"paymentCardDetail",children:[e.jsx("div",{className:"payement-card-img",children:e.jsx("img",{src:`/assets/images/${N}`})}),e.jsx("div",{className:"payment-card-number",children:r})]})]})]}))})]}),e.jsx("div",{className:"col-lg-8 col-12",children:e.jsxs("div",{className:"orderSummary",children:[e.jsx("h5",{children:"Order Summary"}),e.jsx("ul",{children:e.jsxs("li",{children:["Plan Price ",e.jsxs("span",{children:["$",i==null?void 0:i.plan_price]})]})}),e.jsx("ul",{className:"subtotal"})]})})]}),e.jsx("div",{className:"row mt-4",children:e.jsxs("div",{className:"col-12 text-center",children:[(a==null?void 0:a.payment_method)&&e.jsx(F,{msg:(u=a==null?void 0:a.payment_method)==null?void 0:u.message}),e.jsx("button",{type:"submit",className:"btn-design",children:"Continue"})]})})]})})})]}),e.jsx("div",{className:`modal-backdrop fade ${s?"show":""}`,style:{display:s?"block":"none"}})]})})},G=()=>{const[s,n]=d.useState([]),[x,i]=d.useState("month"),[j,p]=d.useState([]),[m,g]=d.useState(!1),[a,h]=d.useState({showPaymentModal:!1,planInfo:null}),[u,l]=d.useState(!1),r=()=>{h({...a,showPaymentModal:!a.showPaymentModal})},N=t=>{h({showPaymentModal:!0,planInfo:t})},b=()=>{g(!m),h({planInfo:null,showPaymentModal:!1})};d.useEffect(()=>{s.length===0&&M(),A().then(t=>{var c;p((c=t==null?void 0:t.data)==null?void 0:c.data)}).catch(t=>console.log(t))},[]);const w=t=>{l(!0),B(t).then(c=>{b(),l(!1)}).catch(c=>{console.log(c),r(),P(S),l(!1)})},M=()=>{l(!0),$().then(t=>{var y;const c=[...(y=t==null?void 0:t.data)==null?void 0:y.data],k=c.findIndex(o=>o==null?void 0:o.plan_selected),T=c.findIndex(o=>(o==null?void 0:o.name)==="starter");k<0&&(c[T].plan_selected=!0),n(c)}).catch(t=>{P(S)}).finally(()=>{l(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"tab-pane fade",id:"subscriptionPlans",role:"tabpanel","aria-labelledby":"subscriptionPlans-tab",children:[e.jsxs("div",{className:"text-center plans-tabs",children:[e.jsx("nav",{}),e.jsx("div",{className:"tab-content",children:e.jsx("div",{className:"tab-pane fade show active",children:e.jsx("div",{className:"row",children:s==null?void 0:s.map(t=>e.jsx(z,{plan:t,plansPer:x,togglePaymentModal:r,handleUpgrade:N}))})})})]}),e.jsx("div",{className:"global-table table-responsive",children:e.jsx(L,{planFeatures:j,avaliablePlans:s})})]}),a!=null&&a.showPaymentModal?e.jsx(E,{title:"Select For Payment",showModal:a==null?void 0:a.showPaymentModal,toggleModal:r,planInfo:a==null?void 0:a.planInfo,toggleSuccessModal:b,handleUpgradeSubscription:w,loader:u}):m&&e.jsxs(q,{showModal:m,toggleModal:b,isPaymentSuccessModal:!0,children:[e.jsx("h4",{children:"Success! You're now subscribed"}),e.jsx("p",{children:"You've been successfully subscribed! check your inbox soon for great email from this sender."})]})]})},H=()=>{const[s,n]=d.useState(!0),[x,i]=d.useState(v.SETTING);return e.jsx(e.Fragment,{children:e.jsx(D,{header:"Settings",subTitle:"Vivamus facilisis arcu quis sapien venenatis, a feugiat urna tristique. Sed gravida non mauris at ",showSearchBar:!1,children:e.jsxs("div",{className:"business-dashboard",children:[s&&e.jsx(_,{}),e.jsx("div",{className:"dashboard-main-panel",children:e.jsxs("div",{className:"dashboard-panel-content",children:[e.jsx("div",{className:"top_left font-weight-bold for-mobile",children:e.jsx("h3",{children:"Settings"})}),e.jsxs("div",{className:"dashboard-settings shadow-box",children:[e.jsxs("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:"nav-link active",id:"notification-tab","data-bs-toggle":"tab","data-bs-target":"#notification",type:"button",role:"tab","aria-controls":"notification","aria-selected":"false",onClick:()=>i(v.SETTING),children:"Notifications"})}),f()&&e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:"nav-link",id:"subscriptionPlans-tab","data-bs-toggle":"tab","data-bs-target":"#subscriptionPlans",type:"button",role:"tab","aria-controls":"subscriptionPlans","aria-selected":"true",onClick:()=>i(v.SUBSCRIPTION),children:"Subscription Plans"})})]}),e.jsx(U,{setLoader:n}),f()&&e.jsx(G,{setLoader:n})]})]})})]})})})};export{H as default};
