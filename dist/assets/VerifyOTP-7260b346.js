import{x as m,r as O,j as s,P as W,E as z,e as L,Q as A,l as J}from"./index-f542c721.js";import{S as X}from"./SubmitButton-265ed07f.js";import{S as Y}from"./recaptcha-wrapper-0c87ddc3.js";var M=function(r){return typeof r=="object"&&r!==null},Z=function(r){var w=r.value,I=w===void 0?"":w,N=r.numInputs,i=N===void 0?4:N,k=r.onChange,S=r.onPaste,V=r.renderInput,b=r.shouldAutoFocus,y=b===void 0?!1:b,P=r.inputType,g=P===void 0?"text":P,p=r.renderSeparator,h=r.placeholder,x=r.containerStyle,j=r.inputStyle,D=r.skipDefaultStyles,t=D===void 0?!1:D,l=m.useState(0),a=l[0],d=l[1],c=m.useRef([]),C=function(){return I?I.toString().split(""):[]},R=g==="number"||g==="tel";m.useEffect(function(){c.current=c.current.slice(0,i)},[i]),m.useEffect(function(){var e;y&&((e=c.current[0])===null||e===void 0||e.focus())},[y]);var _=function(){if(typeof h=="string"){if(h.length===i)return h;h.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},B=function(e){var n=R?!isNaN(Number(e)):typeof e=="string";return n&&e.trim().length===1},K=function(e){var n=e.target.value;B(n)&&(T(n),v(a+1))},$=function(e){var n=e.nativeEvent,o=e.target.value;if(!B(o)){if(o.length===i){var u=o.split("").some(function(f){return!B(f)});u||(F(o.split("")),v(i-1))}n.data===null&&n.inputType==="deleteContentBackward"&&(e.preventDefault(),T(""),v(a-1)),e.target.value=""}},q=function(e){return function(n){d(n),e.target.select()}},G=function(){d(a-1)},H=function(e){var n=C();[e.code,e.key].includes("Backspace")?(e.preventDefault(),T(""),v(a-1)):e.code==="Delete"?(e.preventDefault(),T("")):e.code==="ArrowLeft"?(e.preventDefault(),v(a-1)):e.code==="ArrowRight"||e.key===n[a]?(e.preventDefault(),v(a+1)):(e.code==="Spacebar"||e.code==="Space"||e.code==="ArrowUp"||e.code==="ArrowDown")&&e.preventDefault()},v=function(e){var n,o,u=Math.max(Math.min(i-1,e),0);c.current[u]&&((n=c.current[u])===null||n===void 0||n.focus(),(o=c.current[u])===null||o===void 0||o.select(),d(u))},T=function(e){var n=C();n[a]=e[0],F(n)},F=function(e){var n=e.join("");k(n)},Q=function(e){var n;e.preventDefault();var o=C(),u=a,f=e.clipboardData.getData("text/plain").slice(0,i-a).split("");if(!(R&&f.some(function(U){return isNaN(Number(U))}))){for(var E=0;E<i;++E)E>=a&&f.length>0&&(o[E]=(n=f.shift())!==null&&n!==void 0?n:"",u++);v(u),F(o)}};return m.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},M(x)&&x),className:typeof x=="string"?x:void 0,onPaste:S},Array.from({length:i},function(e,n){return n}).map(function(e){var n,o,u;return m.createElement(m.Fragment,{key:e},V({value:(n=C()[e])!==null&&n!==void 0?n:"",placeholder:(u=(o=_())===null||o===void 0?void 0:o[e])!==null&&u!==void 0?u:void 0,ref:function(f){return c.current[e]=f},onChange:K,onFocus:function(f){return q(f)(e)},onBlur:G,onKeyDown:H,onPaste:Q,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(t?{}:{width:"1em",textAlign:"center"},M(j)?j:{}),className:typeof j=="string"?j:void 0,type:g,inputMode:R?"numeric":"text",onInput:$},e),e<i-1&&(typeof p=="function"?p(e):p))}))};const ae=({mobileNo:r,afterAPISuccess:w,mobileNumberScreen:I={},APIUrl:N,setUserId:i,registerFlow:k=!1})=>{const[S,V]=O.useState(""),[b,y]=O.useState(!1),[P,g]=O.useState(!1),[p,h]=O.useState({show:!1,msg:""}),x=t=>{isNaN(t)||(V(t),p.show&&h({show:!1,msg:""}))},j=()=>{y(!0),L.post(N,{phone_number:`+${r}`,otp:S}).then(t=>{var l,a,d,c;y(!1),k||i((a=(l=t==null?void 0:t.data)==null?void 0:l.data)==null?void 0:a.user_code),(d=t==null?void 0:t.data)!=null&&d.message&&A.success(t.data.message),w((c=t==null?void 0:t.data)==null?void 0:c.data)}).catch(t=>{var l,a,d;y(!1),((l=t==null?void 0:t.response)==null?void 0:l.status)===400&&(h({show:!0,msg:(a=t.response.data)==null?void 0:a.message}),A.error((d=t.response.data)==null?void 0:d.message))})},D=()=>{g(!0),L.post(J.resendOtp,{phone_number:`+${r}`}).then(t=>{var l,a;(l=t==null?void 0:t.data)!=null&&l.message&&A.success(t.data.message),h({show:!0,msg:(a=t.data)==null?void 0:a.message}),g(!1)}).catch(t=>{var l,a;g(!1),A.error((a=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:a.message)})};return s.jsxs(s.Fragment,{children:[s.jsx(Y,{verifyNumberPage:!0}),s.jsx("section",{class:"login-process-sec py-100",children:s.jsx("div",{class:"container",children:s.jsx("div",{class:"row",children:s.jsx("div",{class:"col-12",children:s.jsxs("div",{className:"login-process-wrap",children:[P&&s.jsx(W,{}),s.jsx("h3",{children:"Verify your number"}),s.jsxs("p",{children:["Enter the verification code we sent to your phone number."," ",s.jsx("span",{className:"highlightedText",onClick:I,children:"Wrong number?"})]}),s.jsx("div",{className:"form-wrap",children:s.jsxs("form",{children:[s.jsxs("div",{className:"fieldset",children:[s.jsx(Z,{value:S,onChange:x,numInputs:6,renderInput:t=>s.jsx("input",{...t,placeholder:"-",className:"otpInput"}),isInputNum:!0,containerStyle:"OTPInputContainer"}),p.show&&s.jsx(z,{msg:p.msg})]}),s.jsx("div",{className:"fieldset",children:s.jsx(X,{loader:b,type:"button",disabled:S.length!==6||b||p.show,contentText:"Verify",onClickCallBack:j})}),s.jsx("p",{children:s.jsx("span",{className:"highlightedText",onClick:D,children:"Resend code"})})]})})]})})})})})]})};export{ae as V};
