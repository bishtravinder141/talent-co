import{r as o,V as R,W as u,X as k,j as t,Y as w,P as A,Z as S,_ as E,I as f,a0 as I,a1 as O,a2 as B}from"./index-f542c721.js";import{J as M}from"./JobCard-25777740.js";import{g as q,u as z}from"./candidateJobs-9f40d583.js";import"./ShareModal-cfad101f.js";const W=()=>{const[m,P]=o.useState(0),[d,_]=o.useState([]),[F,i]=o.useState(!0),[g,p]=o.useState({page:1}),[h,v]=o.useState({keywords:[],custom_search:"",job_type:[],job_location:[],skills:[],employment_type:[],rating:[],salaryRange:{salary_amount_currency:"",range:"",salary_amount_type:"",salary_amount_max:"",salary_amount_min:""},experiences:[],job_locations:[]}),[J,T]=o.useState([]),[l,L]=o.useState({job_title_text:"",country_city:""});o.useEffect(()=>{var c;i(!0);const e=l.country_city?l.country_city:"",n=l.job_title_text?l.job_title_text:"";let r={...h};((c=h.rating)==null?void 0:c.length)>0&&(r.rating=[Math.max(...h.rating)]);let s=R(r);s=s.length>0?`${s}&page=${g.page}&page_size=${u}&search_keyword=${n}&search_location=${e}`:`page=${g.page}&page_size=${u}&search_keyword=${n}&search_location=${e}`,q(s).then(a=>{var b,x,j,y;_((x=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:x.results),P((y=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:y.count),i(!1)}).catch(a=>{console.log(a,"error in recommended job"),i(!1)}),k().then(a=>{T(a.data.data)}).catch(a=>{console.log(a,"console..loogerrr")})},[h,g]);const D=e=>{p({page:e.selected+1})},$=e=>{i(!0);const n={job:e,job_status:B.saved};z(n).then(r=>{i(!1);const s=d.findIndex(a=>a.id===e),c=[...d];c[s].job_saved=!0,_(c),f(O,I)}).catch(r=>{var s,c;console.log(r),i(!1),f((c=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:c.message)})},N=(e,n)=>{L({...l,[n]:e})},C=()=>{p({page:1})};return t.jsxs(w,{header:"Dashboard",subTitle:"Find a job you love",showSearchBar:!0,handleOnchange:N,searchText:l,handleSubmitSearch:C,isSideFilterRequired:!0,applicationsData:d,dashboardType:"seeker",selectedFilter:h,setSelectedFilter:v,filterList:J,children:[t.jsx("div",{className:"sidebarFilters d-none"}),F&&t.jsx(A,{}),t.jsxs("div",{className:"jobListFilter",children:[t.jsx("h6",{children:"Recommended jobs"}),d.length>0?d.map((e,n)=>t.jsx(o.Fragment,{children:t.jsx(M,{jobDetails:e,headerBadge:!1,featured:!0,handleSaveJob:()=>{$(e==null?void 0:e.id)},showDetailJob:!0})},n)):t.jsx(S,{}),m>u&&t.jsx(E,{onPageChange:D,totalPage:m,jobPerPage:u}),t.jsx("div",{className:"recommended-training mt-5",children:t.jsxs("div",{className:"row align-items-center",children:[t.jsx("div",{className:"col-12",children:t.jsx("h6",{children:"Recommended Training"})}),t.jsx(S,{})]})})]})]})};export{W as default};
