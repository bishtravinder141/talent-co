import{r as l,b as k,u as E,W as p,j as a,Y as O,P as B,aN as D,Z as g,_ as C,N as F,I as _,a0 as M,a1 as U,a2 as W}from"./index-f542c721.js";import{F as Y}from"./FilterTabs-48897b3d.js";import{J as q}from"./JobCard-25777740.js";import{g as z,a as G,b as H,d as Z,e as K,u as Q,f as V}from"./candidateJobs-9f40d583.js";import"./ShareModal-cfad101f.js";const oe=()=>{const[n,S]=l.useState("recommended"),[v,u]=l.useState(0),[f,x]=l.useState({page:1}),[h,m]=l.useState([]),[T,o]=l.useState(!0),[b,N]=l.useState([]),[j,J]=l.useState([]),[r,y]=l.useState({job_title_text:"",country_city:""});k();const P=E();l.useEffect(()=>{o(!0);let s=`page=${f.page}&page_size=${p}&search_keyword=${r.job_title_text}&search_location=${r.country_city}`;n==="recommended"?z(s).then(e=>{var t,c,d,i;m((c=(t=e==null?void 0:e.data)==null?void 0:t.data)==null?void 0:c.results),u((i=(d=e==null?void 0:e.data)==null?void 0:d.data)==null?void 0:i.count),o(!1)}).catch(e=>{o(!1),console.log(e,"error in recommended job")}):n==="saved"||n==="rejected"?(s=`status=${n}&${s}`,G(s).then(e=>{var t,c,d,i;m((c=(t=e==null?void 0:e.data)==null?void 0:t.data)==null?void 0:c.results),u((i=(d=e==null?void 0:e.data)==null?void 0:d.data)==null?void 0:i.count),o(!1)}).catch(e=>{o(!1),console.log(e,"error in recommended job")})):(s=`search_keyword=${r.job_title_text}&search_location=${r.country_city}`,H(s).then(e=>{var t,c,d,i;m((c=(t=e==null?void 0:e.data)==null?void 0:t.data)==null?void 0:c.results),u((i=(d=e==null?void 0:e.data)==null?void 0:d.data)==null?void 0:i.count),o(!1)}).catch(e=>{o(!1),console.log(e,"error in recommended job")})),Z().then(e=>{var t;N((t=e==null?void 0:e.data)==null?void 0:t.data),o(!1)}).catch(e=>{o(!1),console.log(e,"error in recommended job")}),K().then(e=>{var t;J((t=e==null?void 0:e.data)==null?void 0:t.data),o(!1)}).catch(e=>{o(!1),console.log(e,"error in recommended job")})},[f]);const A=s=>{x({page:s.selected+1})},I=s=>{S(s),x({page:1})},L=s=>{o(!0);const e={job:s,job_status:W.saved};Q(e).then(t=>{const c=h.findIndex(i=>i.id===s),d=[...h];d[c].job_saved=!0,m(d),o(!1),_(U,M),setIsSaved(!0)}).catch(t=>{var c,d;console.log(t),o(!1),_((d=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:d.message)})},$=s=>{o(!0),V(s).then(e=>{var t,c,d;o(!1),localStorage.setItem("roomId",(d=(c=(t=e.data)==null?void 0:t.data)==null?void 0:c.results)==null?void 0:d.room_name),P("/job-seeker/messages"),console.log(e)}).catch(e=>{o(!1),console.log(e)})},w=(s,e)=>{y({...r,[e]:s})},R=()=>{x({page:1})};return a.jsx(O,{header:"My Jobs Board",subTitle:"Connecting Opportunities: Your Ultimate Jobs Hub ",showSearchBar:!0,handleOnchange:w,searchText:r,handleSubmitSearch:R,children:a.jsxs("div",{className:"job-listing-details",children:[T&&a.jsx(B,{}),a.jsxs("div",{className:"dashboard-application",children:[a.jsx("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:D.map((s,e)=>a.jsxs(l.Fragment,{children:[a.jsx(Y,{title:s.label,active:n===s.id,handleClickTab:()=>I(s.id)})," "]},e))}),a.jsx("div",{className:"tab-content",id:"myTabContent",children:a.jsx("div",{className:"tab-pane fade show active",id:"recommended",role:"tabpanel","aria-labelledby":"recommended-tab",children:a.jsxs("div",{className:"jobTabscol-flex",children:[a.jsxs("div",{className:`jobsTabs-col ${n==="applied"||n==="rejected"?"full-width":""}`,children:[a.jsx("h4",{children:"Jobs"}),h.length>0?h.map((s,e)=>a.jsx(l.Fragment,{children:a.jsx(q,{handleSaveJob:L,jobDetails:s,badgeName:n==="recommended"?"Recommended":n==="applied"?"Interviewed":"Saved Jobs",showDetailJob:n!=="rejected",headerBadge:n!=="rejected",featured:!1,activeTab:n,createChatRoom:$})},e)):a.jsx(g,{}),v>p&&a.jsx(C,{onPageChange:A,totalPage:v,jobPerPage:p})]}),(n==="recommended"||n==="saved")&&a.jsxs("div",{className:"jobBoardSidebar",children:[a.jsx("h5",{children:"Top Organisations in your category"}),a.jsx("div",{className:"shadow-box mt-2 mb-4",children:(b==null?void 0:b.length)>0?b.map((s,e)=>a.jsxs("div",{className:"skill-profile-col",children:[a.jsx("div",{className:"skill-profile-icon",children:a.jsx("span",{children:a.jsx("img",{src:s!=null&&s.banner_img?`${F}${s==null?void 0:s.logo}`:"../assets/images/view-tags.svg"})})}),a.jsxs("div",{className:"skill-profile-content",children:[a.jsx("h6",{children:s.company_name}),a.jsx("p",{children:s.location})]})]},e)):a.jsx(g,{})}),a.jsx("h5",{children:"Top Job List"}),a.jsx("div",{className:"shadow-box mt-2 mb-4",children:a.jsx("div",{className:"savejobsidebar",children:a.jsx("ul",{children:(j==null?void 0:j.length)>0?j.map((s,e)=>a.jsxs("li",{children:[s.title," ",a.jsxs("span",{children:[s.count," Jobs "]})]},e)):a.jsx(g,{})})})}),a.jsx("h5",{children:"Advertisement"}),a.jsx("div",{className:"advertise mt-2",children:a.jsx(g,{})})]})]})})})]})]})})};export{oe as default};
